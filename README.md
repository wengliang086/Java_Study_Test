# Java知识点测试记录（备忘）

## io

## net

* netty

* nio

* redis

* udp

* zookeeper

    1. 命名服务
    
        在zookeeper的文件系统里创建一个目录，即有唯一的path。通过path即能互相探索发现。
    
    2. 配置管理
        
        Watcher 机制，类似触发器
        
    3. 集群管理
    
        所谓集群管理无在乎两点：是否有机器退出和加入、选举master。 
        * 对于第一点，所有机器约定在父目录GroupMembers下创建临时目录节点，然后监听父目录节点的子节点变化消息。一旦有机器挂掉，该机器与 zookeeper的连接断开，其所创建的临时目录节点被删除，所有其他机器都收到通知：某个兄弟目录被删除。
        * 新机器加入也是类似，所有机器收到通知：新兄弟目录加入，highcount又有了，对于第二点，我们稍微改变一下，所有机器创建临时顺序编号目录节点，每次选取编号最小的机器作为master就好。
    
    4. 分布式锁
    
        锁服务可以分为两类，一个是保持独占，另一个是控制时序。
        
        * 对于第一类，我们将zookeeper上的一个znode看作是一把锁，通过createznode的方式来实现。所有客户端都去创建 /distribute_lock 节点，最终成功创建的那个客户端也即拥有了这把锁。用完删除掉自己创建的distribute_lock 节点就释放出锁。
        * 对于第二类， /distribute_lock 已经预先存在，所有客户端在它下面创建临时顺序编号目录节点，和选master一样，编号最小的获得锁，用完删除，依次方便。
    
    5. 队列管理
    
        两种类型的队列：
        
        1、同步队列，当一个队列的成员都聚齐时，这个队列才可用，否则一直等待所有成员到达。 

        2、队列按照 FIFO 方式进行入队和出队操作。 
        
        第一类，在约定目录下创建临时目录节点，监听节点数目是否是我们要求的数目。 
        
        第二类，和分布式锁服务中的控制时序场景基本原理一致，入列有编号，出列按编号。

## proxy

* cglib

* javassist

* jdk

## spi

## spring schema
